
<div class="container mt-5">
    <h1 class="mb-4 text-center">Patient Profile</h1>

    <form id="updateProfileForm" method="POST" action="/patient/profile/update" class="needs-validation" novalidate>
        <!-- Personal Information -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h4>Personal Information</h4>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    
                    <label for="firstName" class="form-label">First Name</label>
                    <input type="text" id="firstName" name="firstName" value="<%= patient.firstName %>"
                        class="form-control" required>
                    <div class="invalid-feedback">Please enter your first name.</div>
                </div>

                <div class="mb-3">
                    <label for="lastName" class="form-label">Last Name</label>
                    <input type="text" id="lastName" name="lastName" value="<%= patient.lastName %>"
                        class="form-control" required>
                    <div class="invalid-feedback">Please enter your last name.</div>
                </div>

                <div class="mb-3">
                    <label for="phone" class="form-label">Phone</label>
                    <input type="tel" id="phone" name="phone" value="<%= patient.phone %>" class="form-control"
                    inputmode="numeric" maxlength="10" pattern="[0-9]{10}" required>
                    <div class="invalid-feedback">Please enter a valid phone number.</div>
                </div>

                <div class="form-group ">
                    <label for="dateOfBirth">Date of Birth:</label>
                    <input type="date" class="form-control fs-4 " id="dateOfBirth" name="dateOfBirth" value="<%= patient.dateOfBirth ? patient.dateOfBirth.toISOString().split('T')[0] : '' %>" required>
                </div>

                <div class="form-group">
                    <label for="gender">Gender:</label>
                    <select class="form-control fs-4" id="gender" name="gender" required>
                        <option value="Male" <%= patient.gender === 'Male' ? 'selected' : '' %>>Male</option>
                        <option value="Female" <%= patient.gender === 'Female' ? 'selected' : '' %>>Female</option>
                        <option value="Other" <%= patient.gender === 'Other' ? 'selected' : '' %>>Other</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Emergency Contact -->
        <div class="card mb-4">
            <div class="card-header bg-danger text-white">
                <h4>Emergency Contact</h4>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="emergencyContactName" class="form-label">Emergency Contact Name</label>
                    <input type="text" id="emergencyContactName" name="emergencyName"
                        value="<%= patient.emergencyContact.name %>" class="form-control" required>
                    <div class="invalid-feedback">Please enter emergency contact name.</div>
                </div>

                <div class="mb-3">
                    <label for="emergencyContactRelation" class="form-label">Relation</label>
                    <input type="text" id="emergencyContactRelation" name="relation"
                        value="<%= patient.emergencyContact.relation %>" class="form-control" required>
                    <div class="invalid-feedback">Please enter your relation with emergency contact.</div>
                </div>

                <div class="mb-3">
                    <label for="emergencyContactNumber" class="form-label">Emergency Contact Number</label>
                    <input type="tel" id="emergencyContactNumber" name="emergencyPhone"
                        inputmode="numeric" maxlength="10" pattern="[0-9]{10}"     
                        value="<%= patient.emergencyContact.contactNumber %>" class="form-control" required>
                    <div class="invalid-feedback">Please enter a valid emergency contact number.</div>
                </div>
            </div>
        </div>

        <!-- Address Information -->
        <div class="card mb-4">
            <div class="card-header bg-secondary text-white">
                <h4>Address</h4>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="street" class="form-label">Street</label>
                    <input type="text" id="street" name="street" value="<%= patient.address.street %>"
                        class="form-control" required>
                    <div class="invalid-feedback">Please enter your street address.</div>
                </div>

                <div class="mb-3">
                    <label for="city" class="form-label">City</label>
                    <input type="text" id="city" name="city" value="<%= patient.address.city %>"
                        class="form-control" required>
                    <div class="invalid-feedback">Please enter your city.</div>
                </div>

                <div class="mb-3">
                    <label for="state" class="form-label">State</label>
                    <input type="text" id="state" name="state" value="<%= patient.address.state %>"
                        class="form-control" required>
                    <div class="invalid-feedback">Please enter your state.</div>
                </div>

                <div class="mb-3">
                    <label for="zipCode" class="form-label">Zip Code</label>
                    <input type="tel" id="zipCode" name="zipCode" value="<%= patient.address.zipCode %>"
                    pattern="[0-9]{6}" inputmode="numeric" maxlength="6" class="form-control" required>
                    <div class="invalid-feedback">Please enter your zip code.</div>
                </div>

                <div class="mb-3">
                    <label for="country" class="form-label">Country</label>
                    <input type="text" id="country" name="country" value="<%= patient.address.country %>"
                        class="form-control" required>
                    <div class="invalid-feedback">Please enter your country.</div>
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-success btn-lg w-100">Update Profile</button>
    </form>
</div>

<!-- Load Bootstrap JS and dependencies -->


<!-- Client-side form validation -->
<script>
    (function () {
        'use strict';

        var forms = document.querySelectorAll('.needs-validation');

        Array.prototype.slice.call(forms).forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                }

                form.classList.add('was-validated');
            }, false);
        });
    })();
</script>